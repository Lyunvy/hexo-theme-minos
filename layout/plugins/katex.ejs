<% if (!head && (is_home() || page.math === true) && !(has_config('plugins.katex') && get_config('plugins.katex') === false)) { %>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css">
    <style>
        .katex-display {
        min-height: 100%;
        width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        }
        @media (max-aspect-ratio: 2400/1850) {
        .katex-display::-webkit-scrollbar {
            display: none; /*在移动端不显示横向滚动条*/
        }
        }
        .katex-display>.katex>.katex-html>.tag {
            position: sticky !important;
            position: -webkit-sticky !important;
        }
    </style>
    <script defer src="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js"></script>
    <script defer src="//cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js"></script>
    <script defer>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            // ...options...
            delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              // • rendering keys, e.g.:
              throwOnError : false
        });
    });
    </script>
<% } %>